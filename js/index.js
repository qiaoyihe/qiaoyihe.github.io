!function(){const e=document.querySelector(".btn-backtotop"),t=document.querySelector(".content ");window.addEventListener("scroll",(function(){let n=document.documentElement.scrollTop>t.offsetTop?1:0;e.style.opacity=n})),e.addEventListener("click",(function(){document.documentElement.scrollTop=0}))}(),function(){const e=document.querySelectorAll(".categories-a"),t=document.querySelectorAll(".page-content .classtest-link");function n(){return`${parseInt(256*Math.random())},${parseInt(256*Math.random())},${parseInt(256*Math.random())}`}e.forEach((e=>{const t=parseInt(13*Math.random())+12,o=n();e.style.color=`rgba(${o})`,e.style.fontSize=`${t}px`})),t.forEach((e=>{const t=parseInt(13*Math.random())+12,o=n();e.style.color=`rgba(${o})`,e.style.fontSize=`${t}px`}))}(),window.addEventListener("scroll",(function(){const e=document.querySelector(".right-toc"),t=document.querySelector(".post-copyright");let n=document.documentElement.scrollTop;e&&(n>=e.offsetTop&&(e.classList.add("catalogue"),n<259&&e.classList.remove("catalogue")),n>=t.offsetTop-400&&e.classList.remove("catalogue"))})),function(){const e=document.querySelector("#local-search-input"),t=document.querySelector(".local-search-content"),n=document.querySelector(".search");function o(s){n.contains(s.target)||("block"===t.style.display&&(t.style.display="none"),e.value=""),"none"===t.style.display&&document.removeEventListener("click",o)}e&&e.addEventListener("focus",(function(){t.style.display="block",(t.style.display="none")&&(t.style.display="block"),setTimeout((function(){document.addEventListener("click",o)}),300)}))}(),function(){const e=document.querySelector(".header-nav-items");let t=0;e.addEventListener("mouseover",(function(n){if("header-nav-page"===n.target.className){clearTimeout(t);const o=e.querySelector(".header-nav-flag");t=setTimeout((()=>{o&&o.classList.remove("header-nav-flag"),n.target.nextElementSibling.classList.add("header-nav-flag")}),30)}})),e.addEventListener("mouseleave",(function(){const t=e.querySelector(".header-nav-flag");t&&t.classList.remove("header-nav-flag")}))}(),function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".header-nav-fenlei");function n(t){e.querySelector(".sidebar-content").contains(t.target)||(e.classList.remove("sidebar-open"),e.querySelector(".sidebar-content").classList.remove("sidebar-content-open"),document.body.style.overflow="scroll",document.body.style.position="relative"),document.querySelector(".sidebar-open")||document.removeEventListener("click",n)}t.addEventListener("click",(function(){clearTimeout(0),document.querySelector(".sidebar-open")||(e.classList.add("sidebar-open"),e.querySelector(".sidebar-content").classList.add("sidebar-content-open"),setTimeout((function(){document.addEventListener("click",n)}),300))}))}(),function(){const e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("span"),o=document.createElement("b"),s=document.createElement("b"),i=document.createElement("div");e.classList.add("bigDivks"),i.classList.add("bigMask"),i.classList.add("maskBigDiv");let a="",c=[];imgsNum=document.createElement("span"),imgsNum.classList.add("imgsNum");const l=document.querySelector(".left .talks ");l&&l.addEventListener("click",(function(e){if("IMG"===e.target.tagName&&e.target.dataset.id){console.log(e.target);const t=l.querySelector(".active");t&&t.classList.remove("active"),e.target.parentNode.parentNode.classList.add("active"),a=l.querySelectorAll(".active img"),c=u(a),m(e.target.src,e.target.dataset.id)}}));const r=document.querySelector(".left .post-content");if(r){const e=document.querySelectorAll(".left .post-content img");a=document.querySelectorAll(".left .post-content img"),c=u(a),r.addEventListener("click",(function(t){"IMG"===t.target.tagName&&(e.forEach(((e,t)=>{e.dataset.id=t})),m(t.target.src,t.target.dataset.id))}))}const d=document.querySelector(".photo .left .page-item");function u(e){return[...e].map(((e,t)=>({src:e.src,id:t})))}function m(a,l){i.style.display="block",document.querySelector(".bigMask")||document.body.appendChild(i),document.querySelector(".imgsNum")||e.appendChild(imgsNum),imgsNum.innerText=`${+l+1} / ${c.length}`,e.style.display="block",e.classList.add("bigDiv"),e.classList.add("bigDivs"),t.classList.add("bigPicture"),t.src=a,t.dataset.id=l,e.appendChild(t),n.classList.add("closePicture"),n.innerText="X",e.appendChild(n),document.body.appendChild(e),o.classList.add("pictureSpan"),o.classList.add("pictureSpan1"),o.innerText="<",s.classList.add("pictureSpan"),s.classList.add("pictureSpan2"),s.innerText=">",e.appendChild(o),e.appendChild(s)}d&&(a=d.querySelectorAll(".photo-img .photos img"),c=u(a),d.addEventListener("click",(function(e){"IMG"===e.target.tagName&&m(e.target.src,e.target.dataset.id)}))),n.addEventListener("click",(function(){e.style.display="none",i.style.display="none",e.classList.add("bigDivks")})),e.addEventListener("click",(function(e){if(c)if("pictureSpan1"===e.target.classList[1]){const t=e.target.previousElementSibling.previousElementSibling;+t.dataset.id<=0?(t.src=c[c.length-1].src,t.dataset.id=c.length-1,imgsNum.innerText=`${c.length} / ${c.length}`):(t.src=c[+t.dataset.id-1].src,t.dataset.id=+t.dataset.id-1,imgsNum.innerText=`${+t.dataset.id+1} / ${c.length}`)}else if("pictureSpan2"===e.target.classList[1]){const t=e.target.previousElementSibling.previousElementSibling.previousElementSibling;+t.dataset.id==c.length-1?(t.src=c[0].src,t.dataset.id=0,imgsNum.innerText=`1 / ${c.length}`):(t.src=c[+t.dataset.id+1].src,t.dataset.id=+t.dataset.id+1,imgsNum.innerText=`${+t.dataset.id+1} / ${c.length}`)}})),e.addEventListener("click",(function({target:{tagName:t,className:n}}){"B"!==t&&"bigPicture"!==n&&(this.style.display="none",i.style.display="none",e.classList.add("bigDivks"))}))}(),function(){photosLoading=document.querySelector(".animation-loading");let e=document.querySelectorAll(".photos"),t=document.querySelector(".photo-img");if(!t)return;let n=t.querySelectorAll("img");function o(){if(!t)return;let n=t.offsetWidth,o=e[0].offsetWidth,i=Math.floor(n/o),c=(n-o*i)/(i+1),l=[];for(let e=0;e<i;e++){let t={x:Math.floor((e+1)*c+o*e),y:10};l.push(t)}for(let t=0;t<e.length;t++){let n=s(l);e[t].style.left=l[n].x+"px",e[t].style.top=l[n].y+"px",l[n].y+=e[t].offsetHeight+10}const r=e[e.length-1],d=[...e].splice(-3).map((e=>e.offsetHeight));t.style.height=+r.style.top.replace(/px/,"")+Math.max(...d)+"px",t.style.opacity=1,window.matchMedia("(max-width: 620px)").matches&&(t.style.height=+r.style.top.replace(/px/,"")+r.offsetHeight+"px"),t.style.opacity&&(photosLoading.style.display="none"),"none"===photosLoading.style.display&&a()}function s(e){let t=e[0].y,n=0;for(let o=0;o<e.length;o++)e[o].y<t&&(t=e[o].y,n=o);return n}window.onload=function(){o()},window.onresize=function(){o()};let i=[];function a(){n.forEach((e=>{let t=e.height;i.push(e.src),e.src="",e.style.backgroundColor=`${function(){let e=Math.floor(255*Math.random()),t=Math.floor(255*Math.random()),n=Math.floor(255*Math.random());return"rgba("+e+","+t+","+n+",0.8)"}()}`,e.height=t}));const e=[...n];var t=new IntersectionObserver((e=>{e.forEach((({isIntersecting:e,target:n})=>{e&&(setTimeout((()=>{n.src=i[n.dataset.id]}),300),t.unobserve(n))}))}));e.forEach((e=>t.observe(e)))}}(),function(){const e=document.querySelector(".link-alert-btn"),t=document.querySelector(".link-alert"),n=document.createElement("div");if(!e)return;function o(e){t.contains(e.target)||s()}function s(){t.classList.remove("bigDiv"),t.style.display="none",n.classList.remove("maskBigDiv"),document.removeEventListener("click",o)}e.addEventListener("click",(function(){t.classList.add("bigDivs"),t.style.display="block",n.classList.add("maskBigDiv"),n.style.display="block",document.body.appendChild(n),setTimeout((()=>{document.addEventListener("click",o)}),100)})),t.querySelector(".link-alert-title div").addEventListener("click",(function(){s()}));t.querySelector(".link-alert-form").addEventListener("submit",(function(e){e.preventDefault();const t=this.querySelector("div"),n=this.querySelectorAll("input"),o=[...n].every((e=>e.value));let s={};if(o){n.forEach((e=>{s[e.name]=e.value}));let e=[];for(let t in s)e.push(`${t}=${s[t]}`);t.style.opacity=1,t.innerText="申请成功,请等待审核,审核通过后会邮箱提醒!!!",this.reset();const o=new XMLHttpRequest;o.open("post","https://apis.isqqq.com/link"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(e.join("&"))}else t.style.opacity=1,t.innerText="内容不能为空"}))}();