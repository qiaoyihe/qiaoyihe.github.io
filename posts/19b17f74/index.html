<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="一个记录学习笔记的地方"><meta name="keywords" content="乔一禾,乔一禾博客,乔一禾小栈,记录笔记,记录生活,一个记录学习笔记的地方"><meta name="baidu-site-verification" content="code-R94JrErUi4"><meta name="google-site-verification" content="4QDNjHNosTV6vHQUGRmOXJxh93YkUVa8O5gazOhA9Bs"><title> 记一次webpack | 乔一禾</title><link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/libs/prism/prism.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?654a00ff7065288ed384e9912b0b6e36";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-E8J9N4Q74X"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E8J9N4Q74X")</script><script src="/js/search/jQuery.js"></script><script src="/js/search/search.js"></script><script type="text/javascript">var search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path;searchFunc(path,"local-search-input","local-search-result")</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="乔一禾" type="application/atom+xml"></head><body><header class="clearfix"><div class="headnav wrapper"><div class="logo"><h1> <a href="https://www.isqqq.com">乔一禾</a></h1></div><div class="nav"><div class="search"><div class="local-search"><div class="d-flex local-search-div"> <input id="local-search-input" class="form-control me-2 pe-4" type="search" placeholder="搜索" aria-label="Search"></div> <button class="local-button iconfont icon-sousuo-copy"></button></div><div class="local-search-content"><div class="col-md-8"><div class="markdown-section"><div id="local-search-result"></div></div></div></div></div><div class="header-nav-items"><div class="header-nav-item"> <a href="javascript:void(0)" rel="external nofollow noreferrer" class="header-nav-page"><span>文章</span></a><ul class="header-nav-item-child"><li><a href="/tags/">标签</a></li><li><a href="/archives/">归档</a></li><li><a href="/categories/">分类</a></li></ul></div><div class="header-nav-item"> <a href="javascript:void(0)" rel="external nofollow noreferrer" class="header-nav-page"><span>社交</span></a><ul class="header-nav-item-child"><li><a href="/link/">小伙伴</a></li><li><a href="/about/">关于我</a></li><li><a href="/messageboard">留言板</a></li></ul></div><div class="header-nav-item"> <a href="javascript:void(0)" rel="external nofollow noreferrer" class="header-nav-page"><span>其他</span></a><ul class="header-nav-item-child"><li><a href="/talk/">说说</a></li><li><a href="/photo/">My相册</a></li><li><a href="/">待添加</a></li></ul></div><div class="iconfont icon-fenlei header-nav-fenlei"></div></div></div></div></header><div class="sidebar"><div class="sidebar-bg"></div><div class="sidebar-content"><div class="sidebar-banner"><div class="sidenar-avatar"> <img src="/img/avtar.webp" alt="" id="sidenar-img"></div><div class="sidenar-name">乔一禾</div><div class="sidenar-site"><div class="sidenar-statis"><a href="https://www.isqqq.com"><div>文章</div><div> 12</div></a><a href="/categories/"><div>分类</div><div> 5</div></a><a href="/tags/"><div>标签</div><div> 9</div></a></div></div></div><div class="sidenat-items"><div id="menu"> <a href="javascript::" rel="external nofollow noreferrer"><span>文章</span></a><ul><li><a href="/tags/">标签</a></li><li><a href="/archives/">归档</a></li><li><a href="/categories/">分类</a></li></ul></div><div id="menu"> <a href="javascript::" rel="external nofollow noreferrer"><span>社交</span></a><ul><li><a href="/link/">小伙伴</a></li><li><a href="/about/">关于我</a></li><li><a href="/messageboard">留言板</a></li></ul></div><div id="menu"> <a href="javascript::" rel="external nofollow noreferrer"><span>其他</span></a><ul><li><a href="/talk/">说说</a></li><li><a href="/photo/">My相册</a></li><li><a href="/">待添加</a></li></ul></div></div></div></div><div class="clearfix content wrapper post-"><div class="left"><div class="post-item-post"><h2 class="post-item-title">记一次webpack</h2><hr><div class="post-meta"><div class="meta-firstline"> <span>发表于<i>2023-03-27</i></span> | <span>更新于<i>2023-03-27</i></span></div></div><div class="meta-secondline"> <span>字数总计: <i>6.7k</i></span> | <span>阅读时长: <i>17 mins.</i></span> | <span>阅读量:<i id="busuanzi_value_page_pv"></i></span></div><article class="post-content"><h2 id="1-webpack概述"><a href="#1-webpack概述" class="headerlink" title="1. webpack概述"></a>1. webpack概述</h2><blockquote><p>webpack 是一个基于 NodeJS 的 <strong>静态模块打包器 (module bundler)</strong><br>集成了 webpack, 所以才能对各类文件进行打包处理</p></blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://webpack.js.org/">webpack官网</a></p><h3 id="1-1-webpack-能做什么"><a href="#1-1-webpack-能做什么" class="headerlink" title="1.1 webpack 能做什么"></a>1.1 webpack 能做什么</h3><p>webpack是一个 静态模块 打包器</p><ol><li>语法转换<ul><li>less&#x2F;sass转换成css</li><li>ES6转换成ES5</li><li>typescript转换成原生js</li><li>…</li></ul></li><li>html&#x2F;css&#x2F;js 代码压缩合并 (打包)</li><li>webpack可以在开发期间提供一个开发服务器， 提高开发效率</li></ol><h3 id="1-2-webpack-基本使用"><a href="#1-2-webpack-基本使用" class="headerlink" title="1.2 webpack - 基本使用"></a>1.2 webpack - 基本使用</h3><h4 id="1-2-1-webpack-打包演示"><a href="#1-2-1-webpack-打包演示" class="headerlink" title="1.2.1 webpack 打包演示"></a>1.2.1 webpack 打包演示</h4><p> <strong>1.</strong> 建目录 dist src&#x2F;main.js<br><strong>2.</strong> 初始化</p><pre><code class="line-numbers language-js">   yarn init -y
</code></pre><p><strong>3.</strong> 安装依赖包 ( -D: 将安装包作为开发阶段的依赖, 只在开发阶段使用, 实际上线不加)<br> dependencies 项目依赖<br> devDependencies 开发依赖</p><pre><code class="line-numbers language-js">yarn add webpack  webpack-cli  -D
</code></pre><p><strong>4.</strong> 配置scripts</p><pre><code class="line-numbers language-js">scripts: &#123;
    &quot;build&quot;: &quot;webpack --config webpack.config.js&quot;
&#125;
</code></pre><p> <strong>–config webpack.config.js</strong> 这个配置文件名为默认值, 不加也会默认找这个文件</p><p><strong>5.</strong> 提供 webpack.config.js</p><p> 基础版本</p><pre><code class="line-numbers language-jsx">module.exports = &#123;
  // 入口: 
  entry: &#39;./src/main.js&#39;
&#125;
</code></pre><ol start="6"><li><p>执行脚本</p><pre><code class="line-numbers language-jsx">yarn build
</code></pre></li></ol><p>小测试:</p><p>​ 假定在main.js中导入一个a.js, 多个文件需要打包, wepack会打包成一个文件, 可以节约请求的次数</p><pre><code class="line-numbers language-js">import &#39;./js/a.js&#39;
console.log(&#39;这是main模块&#39;)
</code></pre><h3 id="1-3-package-json-中-scripts的使用说明"><a href="#1-3-package-json-中-scripts的使用说明" class="headerlink" title="1.3 package.json 中 scripts的使用说明"></a>1.3 package.json 中 scripts的使用说明</h3><p>在package.json文件中, 可以配置 scripts … 配置自己的命令</p><pre><code class="line-numbers language-js">&quot;scripts&quot;: &#123;
    &quot;sta&quot;: &quot;yarn add mime&quot;,
    &quot;build&quot;: &quot;webpack --config webpack.config.js&quot;
&#125;
</code></pre><p><strong>运行方式: yarn xx || npm run xx</strong></p><h3 id="1-4-基本配置-配置入口出口模式"><a href="#1-4-基本配置-配置入口出口模式" class="headerlink" title="1.4 基本配置 - 配置入口出口模式"></a>1.4 基本配置 - 配置入口出口模式</h3><p>参考文档: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://webpack.docschina.org/concepts#entry">https://webpack.docschina.org/concepts/#入口-entry-</a></p><pre><code class="line-numbers language-js">const path = require(&#39;path&#39;)

module.exports = &#123;
  // entry: 配置入口文件 (从哪个文件开始打包) 
  entry: &#39;./src/main.js&#39;,

  // output: 配置输出 (打包到哪去)
  output: &#123;
    // 打包输出的目录 (必须是绝对路径)
    path: path.join(__dirname, &#39;dist&#39;),
    // 打包生成的文件名
    filename: &#39;main.js&#39;
  &#125;,

  // 打包模式 production 压缩/development 不压缩
  mode: &#39;development&#39;
&#125;
</code></pre><h2 id="2-webpack-插件-和-loaders的配置"><a href="#2-webpack-插件-和-loaders的配置" class="headerlink" title="2. webpack - 插件 和 loaders的配置"></a>2. webpack - 插件 和 loaders的配置</h2><h3 id="2-1-自动生成html-html-webpack-plugin-插件"><a href="#2-1-自动生成html-html-webpack-plugin-插件" class="headerlink" title="2.1 自动生成html - html-webpack-plugin 插件"></a>2.1 <strong>自动生成html</strong> - <code>html-webpack-plugin</code> 插件</h3><p>每次都要将 public&#x2F;index.html 手动拷贝到 dist 目录， 手动引入打包后的 js， 太麻烦</p><p>所以一般会用一个插件, 会自动拷贝到 dist下, 并自动引入</p><ol><li><p>下载</p><pre><code class="line-numbers language-js">yarn add html-webpack-plugin  -D
</code></pre></li><li><p><strong>在<code>webpack.config.js</code>文件中，引入这个模块</strong> :</p><pre><code class="line-numbers language-js">// 引入自动生成 html 的插件
const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;)
</code></pre></li><li><p>配置</p><pre><code class="line-numbers language-js">plugins: [
  new HtmlWebpackPlugin(&#123; template: &#39;./public/index.html&#39; &#125;)
]
</code></pre></li></ol><blockquote><p><strong>配置好了之后, public 目录的 index.html 就不需要引入打包后的文件了, 会自动被插件生成 html 引入</strong></p></blockquote><p><code>public/index.html</code></p><pre><code class="line-numbers language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id=&quot;app&quot;&gt;
  &lt;ul&gt;
    &lt;li&gt;我是第1个li&lt;/li&gt;
    &lt;li&gt;我是第2个li&lt;/li&gt;
    &lt;li&gt;我是第3个li&lt;/li&gt;
    &lt;li&gt;我是第4个li&lt;/li&gt;
    &lt;li&gt;我是第5个li&lt;/li&gt;
    &lt;li&gt;我是第6个li&lt;/li&gt;
    &lt;li&gt;我是第7个li&lt;/li&gt;
    &lt;li&gt;我是第8个li&lt;/li&gt;
    &lt;li&gt;我是第9个li&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;!-- 打包后的文件会被自动引入, 不需要手动引入了 --&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id="2-2-webpack中处理-css-文件-css-loader"><a href="#2-2-webpack中处理-css-文件-css-loader" class="headerlink" title="2.2 webpack中处理 css 文件 - css-loader"></a>2.2 webpack中处理 css 文件 - <code>css-loader</code></h3><p>webpack默认只认识 js 文件和 json文件, 但是webpack 可以使用 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.webpackjs.com/concepts/loaders">loader</a> 来加载预处理文件, 允许webpack也可以打包 js之外的静态资源。</p><p>所以webpack如果要处理其他文件类型, <strong>记得要先配置对应的 loader</strong></p><p><strong>需求: 去掉小圆点, 新建 css 目录</strong></p><ol><li><p>安装依赖</p><pre><code class="line-numbers language-js">yarn add style-loader css-loader -D
</code></pre></li><li><p>配置</p><pre><code class="line-numbers language-js">module: &#123;
  // loader的规则
  rules: [
    &#123;
      // 正则表达式，用于匹配所有的css文件
      test: /\.css$/,
      // 先用 css-loader 让webpack能够识别 css 文件的内容
      // 再用 style-loader 将样式, 以动态创建style标签的方式添加到页面中去
      use: [ &quot;style-loader&quot;, &quot;css-loader&quot;]
    &#125;
  ]
&#125;,
</code></pre></li></ol><h3 id="2-3-分离-css-文件-mini-css-extract-plugin"><a href="#2-3-分离-css-文件-mini-css-extract-plugin" class="headerlink" title="2.3 分离 css 文件 mini-css-extract-plugin"></a>2.3 分离 css 文件 <code>mini-css-extract-plugin</code></h3><p>我们上面的操作，使得<code>css</code>和<code>js</code>文件混杂在一起了，那有没有什么办法把<code>css</code>分离出来呢？</p><p>插件:</p><pre><code class="line-numbers language-js">mini-css-extract-plugin
</code></pre><ol><li><p>安装依赖包</p><pre><code class="line-numbers language-js">yarn add mini-css-extract-plugin -D
</code></pre></li><li><p><strong>在<code>webpack.config.js</code>文件中，引入这个模块</strong></p><pre><code class="line-numbers language-js">// 引入分离 css 文件的 模块
const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;)
</code></pre></li><li><p>配置loaders</p><pre><code class="line-numbers language-js">// 模块加载
module: &#123;
  // loader的规则
  rules: [
    // 配置 css 文件的解析
    &#123;
      test: /\.css$/,
      use: [ // 根据官方文档写的，注意&#39;css-loader&#39;的书写位置
        MiniCssExtractPlugin.loader,
        &#39;css-loader&#39;
      ]
    &#125;,
  ],
&#125;
</code></pre></li><li><p>插件的配置</p><pre><code class="line-numbers language-js">plugins: [
  new HtmlWebpackPlugin(&#123; template: &#39;./public/index.html&#39; &#125;),
  
  // 定义打包好的文件的存放路径和文件名
  new MiniCssExtractPlugin(&#123; 
         filename:&#39;css/index.css&#39;
  &#125;)
  
],
</code></pre></li></ol><h3 id="2-4-webpack-中处理-less-less-loader"><a href="#2-4-webpack-中处理-less-less-loader" class="headerlink" title="2.4 webpack 中处理 less - less-loader"></a>2.4 webpack 中处理 less - <code>less-loader</code></h3><ol><li><p>下载依赖包</p><p>注意: 解析less文件需要识别 less 语法, 所以除了 <code>less-loader</code> 需要额外下载 <code>less</code> 包</p><p>less-loader: 将less转换成 css</p><pre><code class="line-numbers language-js">yarn add less  less-loader  -D
</code></pre></li><li><p>配置</p><pre><code class="line-numbers language-js">// 配置 less 文件的解析
&#123;
  test: /\.less$/,
  use: [
    // 分离出 css 内容
    MiniCssExtractPlugin.loader, 
    &#39;css-loader&#39;,
    &#39;less-loader&#39; 
  ]
&#125;
</code></pre></li></ol><h3 id="2-5-webpack-中处理图片-内置的-asset-module"><a href="#2-5-webpack-中处理图片-内置的-asset-module" class="headerlink" title="2.5 webpack 中处理图片 - 内置的 asset module"></a>2.5 webpack 中处理图片 - 内置的 asset module</h3><p>我们试了一下，在项目中使用一下 img 图片。结果就报错了，难道<code>webpack</code>连图片也认不出来吗？</p><pre><code class="line-numbers language-jsx">import imgObj from &#39;./imgs/01.jpg&#39;
const img = document.creatreElement(&#39;img&#39;)
img.src = imgObj
app.appendChild(img)
</code></pre><p>没有错，的确认不出来, 此时需要用webpack5 内置的 asset 资源处理模块，来处理图片资源。</p><p>webpack5 处理资源： <a target="_blank" rel="noopener external nofollow noreferrer" href="https://webpack.docschina.org/guides/asset-modules/">https://webpack.docschina.org/guides/asset-modules/</a></p><p><code>tips</code>: webpack4 中来处理图片的问题, 主要用到 <code>url-loader</code> 和 <code>file-loader</code> 两个模块， 现 webpack5 已集成，无需安装。</p><p>*<em>配置 rules 基本规则：</em></p><pre><code class="line-numbers language-js">&#123;
  test: /\.(png|jpg|gif|jpeg)$/i,
  type: &#39;asset&#39;
&#125;
</code></pre><p>（1）对于小于 8k 的图片，会自动转 base64 字符串（节约请求次数，成本：放大约30%的图片体积大小）</p><p>（2）对于大于 8k 的图片，会生成单独文件引入。</p><p><strong>配置图片的打包输出目录：</strong></p><p>默认是直接输出到了 dist 根目录, 可以通过 generator 进行配置</p><pre><code class="line-numbers language-js">&#123;
  test: /\.(png|jpg|gif|jpeg)$/i,
  type: &#39;asset&#39;,
  generator: &#123;
    filename: &#39;images/[hash][ext]&#39;
  &#125;
&#125;
</code></pre><h3 id="2-6-webpack-配置字体图标-和图片一致"><a href="#2-6-webpack-配置字体图标-和图片一致" class="headerlink" title="2.6 webpack 配置字体图标 - 和图片一致"></a>2.6 webpack 配置字体图标 - 和图片一致</h3><p>字体图标 和 图片的配置一致</p><pre><code class="line-numbers language-js">// 处理字体图标的解析
&#123;
  test: /\.(eot|svg|ttf|woff|woff2)$/,
  type: &#39;asset&#39;,
  generator: &#123;
    filename: &#39;fonts/[hash][ext]&#39;
  &#125;
&#125;
</code></pre><h3 id="2-7-webpack-使用-babel-处理高版本的-js-语法"><a href="#2-7-webpack-使用-babel-处理高版本的-js-语法" class="headerlink" title="2.7 webpack 使用 babel 处理高版本的 js 语法"></a>2.7 webpack 使用 babel 处理高版本的 js 语法</h3><p>webpack 默认仅内置了 模块化的 兼容性处理 <code>import export</code></p><p>babel 的介绍 &#x3D;&gt; 用于处理高版本 js语法 的兼容性</p><ol><li><p>安装包</p><pre><code class="line-numbers language-js">yarn add -D babel-loader @babel/core @babel/preset-env
</code></pre></li><li><p>配置规则</p><pre><code class="line-numbers language-js">module: &#123;
  rules: [
    &#123;
      test: /\.js$/,
      exclude: /(node_modules)/,
      use: &#123;
        loader: &#39;babel-loader&#39;,
        options: &#123;
          presets: [&#39;@babel/preset-env&#39;]
        &#125;
      &#125;
    &#125;
  ]
&#125;
</code></pre></li></ol><h3 id="2-8-webpack-Source-Map"><a href="#2-8-webpack-Source-Map" class="headerlink" title="2.8 webpack - Source Map"></a>2.8 webpack - Source Map</h3><h4 id="2-8-1-什么是Source-Map"><a href="#2-8-1-什么是Source-Map" class="headerlink" title="2.8.1 什么是Source Map?"></a>2.8.1 什么是Source Map?</h4><p><strong>Source Map 就是一个信息文件，里面储存着位置信息。</strong></p><p>也就是说，Source Map 文件中存储着代码压缩混淆前后的对应关系。有了它，出错的时候，除错工具将<strong>直接显示原始代码，而不是转换后的代码</strong>，能够极大的方便后期的调试。</p><h4 id="2-8-2-开发环境下的-Source-Map"><a href="#2-8-2-开发环境下的-Source-Map" class="headerlink" title="2.8.2 开发环境下的 Source Map"></a>2.8.2 开发环境下的 Source Map</h4><p>在开发环境下，webpack 默认启用了 Source Map 功能。当程序运行出错时，可以直接在控制台提示错误行的位置，并定位到具体的源代码, 但错误行数有时会对不上:</p><p>需要配置:</p><pre><code class="line-numbers language-js">// eval-source-map 仅限在&quot;开发模式&quot;下使用, 不建议在&quot;生产模式&quot;下使用
// 此选项生产的Source Map能够保证&quot;运行时报错的行数&quot;与&quot;源代码的行数&quot;保持一直
// devtool: &#39;eval-source-map&#39;,
devtool: &#39;eval-source-map&#39;
</code></pre><h4 id="2-8-3-生产环境下的-Source-Map"><a href="#2-8-3-生产环境下的-Source-Map" class="headerlink" title="2.8.3 生产环境下的 Source Map"></a>2.8.3 生产环境下的 Source Map</h4><p>在生产环境下，如果没有配置devtool 选项，则最终生成的文件中不启用Source Map功能。这能够防止原始代码通过Source Map 的形式暴露给别有所图之人。</p><p><strong>需求: 在生产环境下，只想定位报错的具体行数，但不想暴露源码。主要是方便快速定位到bug, 快速修复!</strong></p><p>此时可以配置:</p><pre><code class="line-numbers language-js">devtool: &#39;nosources-source-map&#39;
</code></pre><h4 id="2-8-4-Source-Map-的最佳实践"><a href="#2-8-4-Source-Map-的最佳实践" class="headerlink" title="2.8.4 Source Map 的最佳实践"></a>2.8.4 Source Map 的最佳实践</h4><ul><li><p>开发环境下：</p><p>建议把 <code>devtool</code> 的值设置为 <code>eval-source-map</code></p><p>好处：可以精准定位到具体的错误行。</p></li><li><p>生产环境下：</p><p> 建议关闭 <code>Source Map</code> 或将 <code>devtool</code> 的值设置为 <code>nosources-source-map</code></p><p>好处：防止源码泄露，提高网站的安全性。</p></li></ul><h3 id="2-9-webpack-watch"><a href="#2-9-webpack-watch" class="headerlink" title="2.9 webpack - watch"></a>2.9 webpack - watch</h3><h4 id="使用watch-mode-观察模式"><a href="#使用watch-mode-观察模式" class="headerlink" title="使用watch mode(观察模式)"></a>使用watch mode(观察模式)</h4><p>直接执行<code>yarn build</code>命令的话，就是执行一次编译一次, 多次调试会显得很麻烦, 我们可以配置<code>watch</code>模式, 来监视项目中的文件更改，并在文件更改时重新编译;</p><p>换句话说，修改了内容之后只要刷新浏览器就可以看到最新的效果, 不需要再手动执行<code>yarn build</code>命令重新编译了。</p><ol><li>运行时在命令后面加<code>--watch</code></li></ol><pre><code class="line-numbers language-js">yarn build --watch
</code></pre><ol start="2"><li>webpack.config.js中配置</li></ol><pre><code class="line-numbers language-js">
module.exports = &#123;
  watch: true, // 启用 watch 模式
  watchOptions: &#123;
    // 忽略监视node_modules文件夹中的内容变化
    ignored: /node_modules/,
  &#125;   
&#125;  
</code></pre><blockquote><p>执行一次编译多次</p><p>只要你修改了相关的文件，就会重新触发编译。这个比较适合多次反复调试的情况。</p></blockquote><h3 id="2-10-webpack-开发服务器"><a href="#2-10-webpack-开发服务器" class="headerlink" title="2.10 webpack - 开发服务器"></a>2.10 webpack - 开发服务器</h3><h4 id="2-11-webpack-dev-server自动刷新"><a href="#2-11-webpack-dev-server自动刷新" class="headerlink" title="2.11 webpack-dev-server自动刷新"></a>2.11 webpack-dev-server自动刷新</h4><ol><li>下载</li></ol><pre><code>yarn add webpack-dev-server -D
</code></pre><ol start="2"><li>配置scripts</li></ol><pre><code class="line-numbers language-js">&quot;scripts&quot;: &#123;
    &quot;build&quot;: &quot;webpack --config webpack.config.js&quot;,
    &quot;dev&quot;: &quot;webpack serve --config webpack.config.js&quot;
&#125;
</code></pre><h4 id="2-12-webpack-dev-server-的配置"><a href="#2-12-webpack-dev-server-的配置" class="headerlink" title="2.12 webpack-dev-server 的配置"></a>2.12 webpack-dev-server 的配置</h4><p>webpack-dev-server配置文档: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://webpack.docschina.org/configuration/dev-server/#devserverafter">https://webpack.docschina.org/configuration/dev-server/#devserverafter</a></p><pre><code class="line-numbers language-js">devServer: &#123;
  port: 3000, // 端口号
  open: true // 自动打开浏览器
&#125;
</code></pre><blockquote><p>webpack-dev-server和watch的区别:</p><p>webpack-der-server 监测到代码变化后，浏览器可以看到及时更新的效果，但是并没有自动打包修改的代码</p><p>yarn build –watch 在监测到代码变化后自动打包修改的代码</p></blockquote></article><div class="post-copyright"><div class="post-copyright__author"> <span class="post-copyright-meta">文章作者:</span> <span><a href="/">乔一禾</a></span></div><div class="post-copyright__type"> <span class="post-copyright-meta">文章链接:</span> <span><a href="https://www.isqqq.com/posts/19b17f74/">https://www.isqqq.com/posts/19b17f74/</a></span></div><div class="post-copyright__notice"> <span class="post-copyright-meta">版权声明:</span> <span>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="/">乔一禾</a></span></div></div><div class="tag_share clearfix"><div class="post_share"> <a href="">分享链接</a></div></div><div class="pagination-post clearfix"><div class="next-post_1"> <a href="/posts/69e9f52a/"><img src="/img/3.webp" alt=""><div class="pagination-info"><div> 下一篇</div><div> Star</div></div></a></div></div></div></div><div class="right"><ul><li class="right-li"><a href="/" class=""><b class="iconfont icon-none"></b><i class="iconfont icon-wenzhang"></i> 文章 <span>12</span></a></li><li class="right-li"><a href="/tags/" class=""><b class="iconfont icon-none"></b><i class="iconfont icon-biaoqian"></i> 标签 <span>9</span></a></li><li class="right-li"><a href="/categories/" class=""><b class="iconfont icon-none"></b><i class="iconfont icon-fenleiorguangchangorqita"></i> 分类 <span>5</span></a></li><li class="right-li"><a href="/photo"><b class="iconfont icon-none"></b><i class="iconfont icon-tuku"></i> 图片 <span>10</span></a></li><li class="right-li"><a href="/link" class=""><b class="iconfont icon-none"></b><i class="iconfont icon-wenzhang"></i> 小伙伴 <span>2</span></a></li></ul><br><div class="right-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-webpack%E6%A6%82%E8%BF%B0"><span class="toc-text">1. webpack概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-webpack-%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-text">1.1 webpack 能做什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-webpack-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">1.2 webpack - 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-webpack-%E6%89%93%E5%8C%85%E6%BC%94%E7%A4%BA"><span class="toc-text">1.2.1 webpack 打包演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-package-json-%E4%B8%AD-scripts%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-text">1.3 package.json 中 scripts的使用说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE-%E9%85%8D%E7%BD%AE%E5%85%A5%E5%8F%A3%E5%87%BA%E5%8F%A3%E6%A8%A1%E5%BC%8F"><span class="toc-text">1.4 基本配置 - 配置入口出口模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-webpack-%E6%8F%92%E4%BB%B6-%E5%92%8C-loaders%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">2. webpack - 插件 和 loaders的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90html-html-webpack-plugin-%E6%8F%92%E4%BB%B6"><span class="toc-text">2.1 自动生成html - html-webpack-plugin 插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-webpack%E4%B8%AD%E5%A4%84%E7%90%86-css-%E6%96%87%E4%BB%B6-css-loader"><span class="toc-text">2.2 webpack中处理 css 文件 - css-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%88%86%E7%A6%BB-css-%E6%96%87%E4%BB%B6-mini-css-extract-plugin"><span class="toc-text">2.3 分离 css 文件 mini-css-extract-plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-webpack-%E4%B8%AD%E5%A4%84%E7%90%86-less-less-loader"><span class="toc-text">2.4 webpack 中处理 less - less-loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-webpack-%E4%B8%AD%E5%A4%84%E7%90%86%E5%9B%BE%E7%89%87-%E5%86%85%E7%BD%AE%E7%9A%84-asset-module"><span class="toc-text">2.5 webpack 中处理图片 - 内置的 asset module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-webpack-%E9%85%8D%E7%BD%AE%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87-%E5%92%8C%E5%9B%BE%E7%89%87%E4%B8%80%E8%87%B4"><span class="toc-text">2.6 webpack 配置字体图标 - 和图片一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-webpack-%E4%BD%BF%E7%94%A8-babel-%E5%A4%84%E7%90%86%E9%AB%98%E7%89%88%E6%9C%AC%E7%9A%84-js-%E8%AF%AD%E6%B3%95"><span class="toc-text">2.7 webpack 使用 babel 处理高版本的 js 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-webpack-Source-Map"><span class="toc-text">2.8 webpack - Source Map</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-%E4%BB%80%E4%B9%88%E6%98%AFSource-Map"><span class="toc-text">2.8.1 什么是Source Map?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-2-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84-Source-Map"><span class="toc-text">2.8.2 开发环境下的 Source Map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-3-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8B%E7%9A%84-Source-Map"><span class="toc-text">2.8.3 生产环境下的 Source Map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-4-Source-Map-%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">2.8.4 Source Map 的最佳实践</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-webpack-watch"><span class="toc-text">2.9 webpack - watch</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8watch-mode-%E8%A7%82%E5%AF%9F%E6%A8%A1%E5%BC%8F"><span class="toc-text">使用watch mode(观察模式)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-webpack-%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">2.10 webpack - 开发服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-webpack-dev-server%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0"><span class="toc-text">2.11 webpack-dev-server自动刷新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-12-webpack-dev-server-%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">2.12 webpack-dev-server 的配置</span></a></li></ol></li></ol></li></ol></div></div><div class="btn"><div class="btn-backtotop"><a href="javascript:;" rel="external nofollow noreferrer" class="iconfont icon-tubiaolunkuo-"></a></div></div></div><div class="comments comment-wrapper"><div class="comment-left"><div id="tcomment"></div></div><div class="comment-right"></div></div><script src="https://cdn.staticfile.org/twikoo/1.6.10/twikoo.all.min.js"></script><script>twikoo.init({envId:"yun-9gjlkebg325f1ee7",el:"#tcomment",region:"ap-shanghai"})</script><script>let copyEnable="false";function fn(){document.addEventListener("copy",(function(t){let n=t.clipboardData||window.clipboardData;if(!n)return;let e=window.getSelection().toString();e&&(t.preventDefault(),n.setData("text/plain",e+"\r\n著作权归作者所有。 商业转载请联系作者获得授权，非商业转载请注明出处。\n作者: 乔一禾\n原文地址: https://www.isqqq.com/posts/19b17f74/"))}))}"true"==copyEnable&&fn()</script><footer><div class="footer wrapper"> <span>本站原创内容版权遵循 CC-BY-NC-SA 协议规定,转载请注明出处.本站部分资源收集于网络,只做学习和交流使用,版权归原作者所有.</span><div class="copyright"> &copy <span>2020</span> - <span>2023</span> By <a href="#">乔一禾</a></div><div class="framework-info"> <span>框架</span> <a href="#">Hexo</a> | <span>主题</span> <a href="https://www.isqqq.com">Star</a></div><div class="footer_custom_text"> <span>HOST</span> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.tencent.com/"><img src="https://www.isqqq.com/img/tencent.svg" alt="腾讯云"></a> | CDN <a target="_blank" rel="noopener external nofollow noreferrer" href="https://cloud.tencent.com/"><img src="https://www.isqqq.com/img/tencent.svg" alt="腾讯云"></a> And <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.upyun.com/"><img src="https://www.isqqq.com/img/youpaiyun.png" alt="又拍云"></a><br> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/" class="beian">渝ICP备2022014543号-1</a></div></div></footer><script src="/js/index.js"></script><script src="https://cdn.staticfile.org/twikoo/1.6.10/twikoo.all.min.js"></script><script src="/libs/prism/prism.js" async></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>